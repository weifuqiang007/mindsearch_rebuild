## é—®é¢˜ä¸€ã€ä»£ç è§£è¯»--é…ç½®æ–‡ä»¶çš„å†™æ³•

è¿™æ˜¯ä¸€æ®µé…ç½®æ–‡ä»¶çš„ä¹¦å†™æ–¹å¼
```python
from pydantic import Field
from pydantic_settings import BaseSettings, SettingsConfigDict
from typing import Optional, List


class SearchConfig(BaseSettings):
    """æœç´¢å¼•æ“é…ç½®"""
    
    model_config = SettingsConfigDict(
        env_file=".dev_env",
        env_file_encoding="utf-8",
        case_sensitive=False,
        extra="ignore"
    )
    
    # Bing Search
    bing_api_key: Optional[str] = Field(default=None, env="BING_SEARCH_API_KEY")
    bing_endpoint: str = Field(default="https://api.bing.microsoft.com/v7.0/search", env="BING_ENDPOINT")
    
    # Google Search
    google_api_key: Optional[str] = Field(default=None, env="GOOGLE_API_KEY")
    google_cse_id: Optional[str] = Field(default=None, env="GOOGLE_CSE_ID")
    
    # Serper API
    serper_api_key: Optional[str] = Field(default=None, env="SERPER_API_KEY")
    
    # DuckDuckGo (æ— éœ€ API Key)
    
    # æœç´¢é…ç½®
    default_engine: str = Field(default="duckduckgo", env="DEFAULT_SEARCH_ENGINE")
    default_search_engine: str = Field(default="duckduckgo", env="DEFAULT_SEARCH_ENGINE")
    max_search_results: int = Field(default=10, env="MAX_SEARCH_RESULTS")
    search_timeout: int = Field(default=30, env="SEARCH_TIMEOUT")
    
    # å†…å®¹æŠ“å–
    max_content_length: int = Field(default=5000, env="MAX_CONTENT_LENGTH")
    enable_content_extraction: bool = Field(default=True, env="ENABLE_CONTENT_EXTRACTION")


```

- è¯¥ç±»ç»§æ‰¿è‡ª pydantic.BaseSettingsï¼Œè¿™æ˜¯ä¸“ç”¨äºé…ç½®ç®¡ç†çš„ç±»
- å®æˆ˜æ„ä¹‰ï¼šè‡ªåŠ¨æ”¯æŒä»ç¯å¢ƒå˜é‡/æ–‡ä»¶åŠ è½½é…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨å†™åŠ è½½é€»è¾‘
- å¯¹æ¯”æ™®é€šclassï¼šå¦‚æœç”¨æ™®é€šç±»ï¼Œéœ€è¦è‡ªå·±å®ç° os.getenv() ç­‰ç¯å¢ƒå˜é‡è¯»å–ä»£ç 

```python
model_config = SettingsConfigDict(
    env_file=".dev_env",          # ä».dev_envæ–‡ä»¶åŠ è½½é…ç½®
    env_file_encoding="utf-8",    # æ–‡ä»¶ç¼–ç 
    case_sensitive=False,         # ç¯å¢ƒå˜é‡åä¸åŒºåˆ†å¤§å°å†™
    extra="ignore"                # å¿½ç•¥å¤šä½™å­—æ®µ
)
```
- å…¸å‹åœºæ™¯ï¼š
å¼€å‘æ—¶.dev_envæ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆä¸æäº¤åˆ°gitï¼‰
- ç”Ÿäº§ç¯å¢ƒé€šè¿‡docker-composeç­‰æ³¨å…¥çœŸå®ç¯å¢ƒå˜é‡
- å®‰å…¨è®¾è®¡ï¼šextra="ignore" é˜²æ­¢é…ç½®æ³¨å…¥æ”»å‡»

- Bing æœç´¢é…ç½®
<PYTHON>
bing_api_key: Optional[str] = Field(default=None, env="BING_SEARCH_API_KEY")
bing_endpoint: str = Field(default="https://api.bing.microsoft.com/v7.0/search", env="BING_ENDPOINT")
- å…³é”®å‚æ•°ï¼š
default=Noneï¼šæ²¡æœ‰æä¾›keyæ—¶é»˜è®¤ä¸ºNoneï¼ˆè€Œä¸æ˜¯æŠ¥é”™ï¼‰
env="BING_SEARCH_API_KEY"ï¼šä¼˜å…ˆä»ç¯å¢ƒå˜é‡è¯»å–
- URLè¯´æ˜ï¼š
v7.0æ˜¯Bing APIå½“å‰ç¨³å®šç‰ˆæœ¬
ä¼ä¸šç‰ˆå¯èƒ½ç”¨è‡ªå®šä¹‰endpoint

- Google æœç´¢é…ç½®
```python
google_api_key: Optional[str] = Field(default=None, env="GOOGLE_API_KEY")
google_cse_id: Optional[str] = Field(default=None, env="GOOGLE_CSE_ID")
CSE IDï¼šCustom Search Engine IDï¼Œéœ€è¦å…ˆåœ¨Google CSEæ§åˆ¶å°åˆ›å»º
```
å•†ä¸šé¡¹ç›®å»ºè®®ï¼š
ä½¿ç”¨serper_api_keyï¼ˆGoogleå®˜æ–¹APIä»·æ ¼æ˜‚è´µï¼‰
å…è´¹é¢åº¦ï¼šæ¯å¤©100æ¬¡æœç´¢ï¼ˆCSEï¼‰


é»˜è®¤å¼•æ“è®¾ç½®
```python
default_engine: str = Field(default="duckduckgo", env="DEFAULT_SEARCH_ENGINE")
default_search_engine: str = Field(default="duckduckgo", env="DEFAULT_SEARCH_ENGINE")
```

DuckDuckGoä¼˜åŠ¿ï¼š
æ— éœ€API Keyï¼ˆé€‚åˆè½»é‡çº§åº”ç”¨ï¼‰
éšç§å‹å¥½ï¼ˆä¸è·Ÿè¸ªç”¨æˆ·ï¼‰
è®¾è®¡ç–‘é—®ï¼š
ä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ªé‡å¤å­—æ®µï¼Ÿï¼ˆå¯èƒ½æ˜¯å†å²é—ç•™é—®é¢˜ï¼Œå»ºè®®åˆ é™¤å…¶ä¸­ä¸€ä¸ªï¼‰
7. æœç´¢å‚æ•°
```python
max_search_results: int = Field(default=10, env="MAX_SEARCH_RESULTS")
search_timeout: int = Field(default=30, env="SEARCH_TIMEOUT")
```
æ€§èƒ½æƒè¡¡ï¼š
max_search_results=10ï¼šå¹³è¡¡ç»“æœè´¨é‡å’ŒAPIæ¶ˆè€—
timeout=30ç§’ï¼šè€ƒè™‘ç½‘ç»œå»¶è¿Ÿï¼Œä½†è¶…è¿‡15ç§’ç”¨æˆ·ä½“éªŒä¸‹é™
8. å†…å®¹æå–
```python
max_content_length: int = Field(default=5000, env="MAX_CONTENT_LENGTH")
enable_content_extraction: bool = Field(default=True, env="ENABLE_CONTENT_EXTRACTION")
```

å†…å®¹æˆªæ–­ï¼š
å¼€å…³è®¾è®¡ï¼š
æŸäº›åœºæ™¯å¯èƒ½åªéœ€è¦å…ƒä¿¡æ¯ï¼ˆå¦‚æ ‡é¢˜+URLï¼‰


## é—®é¢˜äºŒã€å…³äºä½¿ç”¨æµè§ˆå™¨æœç´¢çš„å¥½å¤„æŒ‡å¼•
```python

# -*- coding: utf-8 -*-
# å¼€å‘å›¢é˜Ÿ   ï¼štianyikeji
# å¼€å‘äººå‘˜   ï¼šweifuqiang
# å¼€å‘æ—¶é—´   ï¼š2025/8/1  10:06 
# æ–‡ä»¶åç§°   ï¼štest1.PY
# å¼€å‘å·¥å…·   ï¼šPyCharm
from datetime import datetime
import time


class SearchEngineDemo:
    """æœç´¢å¼•æ“æ¼”ç¤ºç±»"""

    def __init__(self):
        print("ğŸš€ æœç´¢å¼•æ“é…ç½®æ¼”ç¤º")
        print(f"æ¼”ç¤ºæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
        print("=" * 60)


    def explain_search_engine_conifg(self):
        print("\nğŸ“š æœç´¢å¼•æ“é…ç½®çš„ä½œç”¨")
        print("=" * 40)

        explanations = [
            "1. ç»Ÿä¸€æ¥å£ç®¡ç†: æä¾›ç»Ÿä¸€çš„æœç´¢æ¥å£ï¼Œæ”¯æŒå¤šç§æœç´¢å¼•æ“",
            "2. é…ç½®é›†ä¸­åŒ–: æ‰€æœ‰æœç´¢ç›¸å…³é…ç½®é›†ä¸­åœ¨config.pyä¸­ç®¡ç†",
            "3. ç¯å¢ƒéš”ç¦»: æ”¯æŒå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒçš„ä¸åŒé…ç½®",
            "4. å¼‚æ­¥æ”¯æŒ: åŸç”Ÿæ”¯æŒå¼‚æ­¥æ“ä½œï¼Œæé«˜æ€§èƒ½",
            "5. é”™è¯¯å¤„ç†: ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œé‡è¯•æœºåˆ¶",
            "6. ç»“æœæ ‡å‡†åŒ–: ä¸åŒæœç´¢å¼•æ“çš„ç»“æœç»Ÿä¸€ä¸ºSearchResultæ ¼å¼",
            "7. åŠŸèƒ½æ‰©å±•: æ”¯æŒå¤šå¼•æ“æœç´¢ã€ç»“æœèšåˆã€è¯„åˆ†ç­‰é«˜çº§åŠŸèƒ½"
        ]

        for explanation in explanations:
            print(f"   {explanation}")


    def show_config_structure(self):
        print("\nğŸ”§ é…ç½®æ–‡ä»¶ç»“æ„ (config.py)")
        print("=" * 40)

        config_example = '''
        class SearchConfig(BaseModel):
            """æœç´¢é…ç½®"""
            default_engine: str = Field(default="duckduckgo", description="é»˜è®¤æœç´¢å¼•æ“")

            # Googleæœç´¢é…ç½®
            google_api_key: Optional[str] = Field(default=None, alias="GOOGLE_API_KEY")
            google_search_engine_id: Optional[str] = Field(default=None, alias="GOOGLE_SEARCH_ENGINE_ID")

            # Bingæœç´¢é…ç½®
            bing_api_key: Optional[str] = Field(default=None, alias="BING_API_KEY")
            bing_endpoint: str = Field(default="https://api.bing.microsoft.com", alias="BING_ENDPOINT")

            # Serperæœç´¢é…ç½®
            serper_api_key: Optional[str] = Field(default=None, alias="SERPER_API_KEY")
        '''
        print(config_example)

    def demonstrate_traditional_vs_modern(self):
        """æ¼”ç¤ºä¼ ç»Ÿæ–¹æ³•vsç°ä»£é…ç½®æ–¹æ³•"""
        print("\nğŸ”„ ä¼ ç»Ÿæ–¹æ³• vs æœç´¢å¼•æ“é…ç½®")
        print("=" * 50)

        print("\nâŒ ä¼ ç»Ÿrequestsæ–¹æ³•çš„é—®é¢˜:")
        traditional_code = '''
# ä¼ ç»Ÿæ–¹æ³• - æ¯ä¸ªæœç´¢å¼•æ“éƒ½éœ€è¦å•ç‹¬å®ç°
def search_google(query):
    url = f"https://www.googleapis.com/customsearch/v1?key={api_key}&cx={cx}&q={query}"
    response = requests.get(url)
    # æ‰‹åŠ¨å¤„ç†é”™è¯¯
    if response.status_code != 200:
        raise Exception(f"æœç´¢å¤±è´¥: {response.status_code}")
    # æ‰‹åŠ¨è§£æç»“æœ
    data = response.json()
    results = []
    for item in data.get('items', []):
        results.append({
            'title': item['title'],
            'url': item['link'],
            'snippet': item['snippet']
        })
    return results

def search_bing(query):
    # å®Œå…¨ä¸åŒçš„å®ç°...
    pass

def search_duckduckgo(query):
    # åˆæ˜¯ä¸åŒçš„å®ç°...
    pass
'''
        print(traditional_code)

        print("\nâœ… æœç´¢å¼•æ“é…ç½®æ–¹æ³•çš„ä¼˜åŠ¿:")
        modern_code = '''
# ç°ä»£æ–¹æ³• - ç»Ÿä¸€æ¥å£
from core.search_tools import get_search_manager, SearchEngine

async def search_any_engine(query, engine=None):
    search_manager = get_search_manager()
    results = await search_manager.search(query, engine=engine)
    return results

# ä½¿ç”¨ç¤ºä¾‹
results = await search_any_engine("Pythonç¼–ç¨‹", SearchEngine.GOOGLE)
results = await search_any_engine("Pythonç¼–ç¨‹", SearchEngine.BING)
results = await search_any_engine("Pythonç¼–ç¨‹", SearchEngine.DUCKDUCKGO)

# å¤šå¼•æ“æœç´¢
multi_results = await search_manager.multi_engine_search("Pythonç¼–ç¨‹")

# èšåˆæœç´¢
aggregated = await search_manager.aggregate_search("Pythonç¼–ç¨‹")
'''
        print(modern_code)

    def demonstrate_real_search(self):
        """æ¼”ç¤ºçœŸå®çš„æœç´¢åŠŸèƒ½"""
        print("\nğŸ” çœŸå®æœç´¢æ¼”ç¤º")
        print("=" * 30)

        # ä½¿ç”¨ä¸€ä¸ªç®€å•çš„æœç´¢APIè¿›è¡Œæ¼”ç¤º
        query = "Python programming"
        print(f"æœç´¢æŸ¥è¯¢: {query}")

        try:
            # ä½¿ç”¨JSONPlaceholderä½œä¸ºç¤ºä¾‹APIï¼ˆæ¨¡æ‹Ÿæœç´¢ç»“æœï¼‰
            print("\nğŸ“¡ æ¨¡æ‹Ÿæœç´¢è¯·æ±‚...")
            start_time = time.time()

            # æ¨¡æ‹Ÿæœç´¢ç»“æœ
            mock_results = [
                {
                    "title": "Pythonå®˜æ–¹æ–‡æ¡£",
                    "url": "https://docs.python.org/",
                    "snippet": "Pythonæ˜¯ä¸€ç§è§£é‡Šå‹ã€é¢å‘å¯¹è±¡ã€åŠ¨æ€æ•°æ®ç±»å‹çš„é«˜çº§ç¨‹åºè®¾è®¡è¯­è¨€ã€‚",
                    "source": "google",
                    "score": 0.95
                },
                {
                    "title": "Pythonæ•™ç¨‹ - èœé¸Ÿæ•™ç¨‹",
                    "url": "https://www.runoob.com/python/python-tutorial.html",
                    "snippet": "Pythonæ˜¯ä¸€ä¸ªé«˜å±‚æ¬¡çš„ç»“åˆäº†è§£é‡Šæ€§ã€ç¼–è¯‘æ€§ã€äº’åŠ¨æ€§å’Œé¢å‘å¯¹è±¡çš„è„šæœ¬è¯­è¨€ã€‚",
                    "source": "bing",
                    "score": 0.88
                },
                {
                    "title": "Learn Python Programming",
                    "url": "https://www.programiz.com/python-programming",
                    "snippet": "Learn Python programming with our comprehensive tutorial. Start from basics and advance to complex topics.",
                    "source": "duckduckgo",
                    "score": 0.82
                }
            ]

            end_time = time.time()

            print(f"âœ… æœç´¢å®Œæˆï¼Œè€—æ—¶: {end_time - start_time:.2f}ç§’")
            print(f"ğŸ“Š æ‰¾åˆ° {len(mock_results)} ä¸ªç»“æœ:\n")

            for i, result in enumerate(mock_results, 1):
                print(f"{i}. æ ‡é¢˜: {result['title']}")
                print(f"   é“¾æ¥: {result['url']}")
                print(f"   æ‘˜è¦: {result['snippet']}")
                print(f"   æ¥æº: {result['source']}")
                print(f"   è¯„åˆ†: {result['score']:.2f}")
                print()

        except Exception as e:
            print(f"âŒ æœç´¢å¤±è´¥: {e}")


    def show_advantages_comparison(self):
        """æ˜¾ç¤ºä¼˜åŠ¿å¯¹æ¯”"""
        print("\nğŸ“Š è¯¦ç»†å¯¹æ¯”åˆ†æ")
        print("=" * 50)

        comparisons = [
            {
                "æ–¹é¢": "ä»£ç ç»´æŠ¤",
                "ä¼ ç»Ÿæ–¹æ³•": "æ¯ä¸ªæœç´¢å¼•æ“éœ€è¦å•ç‹¬ç»´æŠ¤ï¼Œä»£ç é‡å¤åº¦é«˜",
                "é…ç½®æ–¹æ³•": "ç»Ÿä¸€æ¥å£ï¼Œä¸€æ¬¡ç¼–å†™ï¼Œå¤šå¤„ä½¿ç”¨",
                "ä¼˜åŠ¿": "å‡å°‘90%çš„é‡å¤ä»£ç "
            },
            {
                "æ–¹é¢": "é”™è¯¯å¤„ç†",
                "ä¼ ç»Ÿæ–¹æ³•": "æ¯ä¸ªå®ç°éƒ½éœ€è¦å•ç‹¬å¤„ç†HTTPé”™è¯¯ã€è¶…æ—¶ç­‰",
                "é…ç½®æ–¹æ³•": "ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œè‡ªåŠ¨é‡è¯•",
                "ä¼˜åŠ¿": "æ›´å¯é çš„é”™è¯¯æ¢å¤"
            },
            {
                "æ–¹é¢": "æ€§èƒ½ä¼˜åŒ–",
                "ä¼ ç»Ÿæ–¹æ³•": "åŒæ­¥è¯·æ±‚ï¼Œé˜»å¡å¼æ“ä½œ",
                "é…ç½®æ–¹æ³•": "å¼‚æ­¥æ“ä½œï¼Œæ”¯æŒå¹¶å‘æœç´¢",
                "ä¼˜åŠ¿": "æ€§èƒ½æå‡3-5å€"
            },
            {
                "æ–¹é¢": "åŠŸèƒ½æ‰©å±•",
                "ä¼ ç»Ÿæ–¹æ³•": "æ·»åŠ æ–°åŠŸèƒ½éœ€è¦ä¿®æ”¹æ‰€æœ‰å®ç°",
                "é…ç½®æ–¹æ³•": "æ”¯æŒå¤šå¼•æ“æœç´¢ã€ç»“æœèšåˆã€æ™ºèƒ½æ’åº",
                "ä¼˜åŠ¿": "ä¸°å¯Œçš„é«˜çº§åŠŸèƒ½"
            },
            {
                "æ–¹é¢": "é…ç½®ç®¡ç†",
                "ä¼ ç»Ÿæ–¹æ³•": "APIå¯†é’¥ç¡¬ç¼–ç æˆ–åˆ†æ•£ç®¡ç†",
                "é…ç½®æ–¹æ³•": "ç¯å¢ƒå˜é‡ç»Ÿä¸€ç®¡ç†ï¼Œæ”¯æŒå¤šç¯å¢ƒ",
                "ä¼˜åŠ¿": "æ›´å®‰å…¨çš„å¯†é’¥ç®¡ç†"
            }
        ]

        for comp in comparisons:
            print(f"\nğŸ”¸ {comp['æ–¹é¢']}:")
            print(f"   âŒ ä¼ ç»Ÿæ–¹æ³•: {comp['ä¼ ç»Ÿæ–¹æ³•']}")
            print(f"   âœ… é…ç½®æ–¹æ³•: {comp['é…ç½®æ–¹æ³•']}")
            print(f"   ğŸ’¡ ä¼˜åŠ¿: {comp['ä¼˜åŠ¿']}")


    def show_use_cases(self):
        """å±•ç¤ºä½¿ç”¨åœºæ™¯"""
        print("\nğŸ¯ å®é™…åº”ç”¨åœºæ™¯")
        print("=" * 30)

        use_cases = [
            {
                "åœºæ™¯": "RAGç³»ç»Ÿ",
                "æè¿°": "æ£€ç´¢å¢å¼ºç”Ÿæˆç³»ç»Ÿéœ€è¦ä»å¤šä¸ªæœç´¢æºè·å–ä¿¡æ¯",
                "ä¼˜åŠ¿": "å¤šå¼•æ“èšåˆæœç´¢ï¼Œæé«˜ä¿¡æ¯è¦†ç›–ç‡"
            },
            {
                "åœºæ™¯": "çŸ¥è¯†é—®ç­”",
                "æè¿°": "æ™ºèƒ½é—®ç­”ç³»ç»Ÿéœ€è¦å®æ—¶æœç´¢æœ€æ–°ä¿¡æ¯",
                "ä¼˜åŠ¿": "å¼‚æ­¥æœç´¢ï¼Œå¿«é€Ÿå“åº”ç”¨æˆ·æŸ¥è¯¢"
            },
            {
                "åœºæ™¯": "å†…å®¹æ¨è",
                "æè¿°": "æ ¹æ®ç”¨æˆ·å…´è¶£æ¨èç›¸å…³å†…å®¹",
                "ä¼˜åŠ¿": "æ™ºèƒ½è¯„åˆ†å’Œæ’åºï¼Œæé«˜æ¨èè´¨é‡"
            },
            {
                "åœºæ™¯": "å¸‚åœºè°ƒç ”",
                "æè¿°": "æ”¶é›†å’Œåˆ†æå¸‚åœºä¿¡æ¯",
                "ä¼˜åŠ¿": "å¤šæºæ•°æ®èšåˆï¼Œå…¨é¢çš„å¸‚åœºæ´å¯Ÿ"
            }
        ]

        for case in use_cases:
            print(f"\nğŸ“Œ {case['åœºæ™¯']}:")
            print(f"   æè¿°: {case['æè¿°']}")
            print(f"   ä¼˜åŠ¿: {case['ä¼˜åŠ¿']}")

        def show_configuration_example(self):
            """å±•ç¤ºé…ç½®ç¤ºä¾‹"""
            print("\nâš™ï¸ ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹")
            print("=" * 40)

            env_example = '''
    # .env æ–‡ä»¶ç¤ºä¾‹
    SEARCH_DEFAULT_ENGINE=google

    # Googleæœç´¢é…ç½®
    GOOGLE_API_KEY=your_google_api_key_here
    GOOGLE_SEARCH_ENGINE_ID=your_search_engine_id_here

    # Bingæœç´¢é…ç½®
    BING_API_KEY=your_bing_api_key_here
    BING_ENDPOINT=https://api.bing.microsoft.com

    # Serperæœç´¢é…ç½®
    SERPER_API_KEY=your_serper_api_key_here
    '''
            print(env_example)

            print("\nğŸ“ ä½¿ç”¨ç¤ºä¾‹:")
            usage_example = '''
    # åŸºæœ¬ä½¿ç”¨
    from core.search_tools import get_search_manager, SearchEngine

    async def main():
        search_manager = get_search_manager()

        # ä½¿ç”¨é»˜è®¤æœç´¢å¼•æ“
        results = await search_manager.search("Pythonç¼–ç¨‹")

        # æŒ‡å®šæœç´¢å¼•æ“
        google_results = await search_manager.search("Pythonç¼–ç¨‹", SearchEngine.GOOGLE)

        # å¤šå¼•æ“æœç´¢
        multi_results = await search_manager.multi_engine_search("Pythonç¼–ç¨‹")

        # èšåˆæœç´¢ï¼ˆå»é‡å’Œæ’åºï¼‰
        best_results = await search_manager.aggregate_search("Pythonç¼–ç¨‹")
    '''
            print(usage_example)
    def run_demo(self):
        self.explain_search_engine_conifg()
        self.show_config_structure()
        self.demonstrate_traditional_vs_modern()
        self.demonstrate_real_search()
        self.show_advantages_comparison()
        self.show_use_cases()
        self.show_config_structure()

        print("\n" + "=" * 60)
        print("ğŸ‰ æ¼”ç¤ºå®Œæˆ")
        print("\nğŸ’¡ æ€»ç»“:")
        print("æœç´¢å¼•æ“é…ç½®æä¾›äº†ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„æœç´¢æ¡†æ¶ï¼Œ")
        print("ä½¿å¾—åº”ç”¨ç¨‹åºèƒ½å¤Ÿè½»æ¾é›†æˆå¤šç§æœç´¢æºï¼Œ")
        print("æé«˜æœç´¢è´¨é‡å’Œç”¨æˆ·ä½“éªŒã€‚")
        print("\nè¿™å¯¹äºæ„å»ºç°ä»£AIåº”ç”¨ï¼ˆå¦‚RAGç³»ç»Ÿã€æ™ºèƒ½é—®ç­”ç­‰ï¼‰")
        print("å…·æœ‰é‡è¦ä»·å€¼ã€‚")


if __name__ == "__main__":
    demo = SearchEngineDemo()
    demo.run_demo()
```

ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

```text
ğŸš€ æœç´¢å¼•æ“é…ç½®æ¼”ç¤º
æ¼”ç¤ºæ—¶é—´: 2025-08-01 13:52:22
============================================================

ğŸ“š æœç´¢å¼•æ“é…ç½®çš„ä½œç”¨
========================================
   1. ç»Ÿä¸€æ¥å£ç®¡ç†: æä¾›ç»Ÿä¸€çš„æœç´¢æ¥å£ï¼Œæ”¯æŒå¤šç§æœç´¢å¼•æ“
   2. é…ç½®é›†ä¸­åŒ–: æ‰€æœ‰æœç´¢ç›¸å…³é…ç½®é›†ä¸­åœ¨config.pyä¸­ç®¡ç†
   3. ç¯å¢ƒéš”ç¦»: æ”¯æŒå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒçš„ä¸åŒé…ç½®
   4. å¼‚æ­¥æ”¯æŒ: åŸç”Ÿæ”¯æŒå¼‚æ­¥æ“ä½œï¼Œæé«˜æ€§èƒ½
   5. é”™è¯¯å¤„ç†: ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œé‡è¯•æœºåˆ¶
   6. ç»“æœæ ‡å‡†åŒ–: ä¸åŒæœç´¢å¼•æ“çš„ç»“æœç»Ÿä¸€ä¸ºSearchResultæ ¼å¼
   7. åŠŸèƒ½æ‰©å±•: æ”¯æŒå¤šå¼•æ“æœç´¢ã€ç»“æœèšåˆã€è¯„åˆ†ç­‰é«˜çº§åŠŸèƒ½

ğŸ”§ é…ç½®æ–‡ä»¶ç»“æ„ (config.py)
========================================

        class SearchConfig(BaseModel):
            """æœç´¢é…ç½®"""
            default_engine: str = Field(default="duckduckgo", description="é»˜è®¤æœç´¢å¼•æ“")

            # Googleæœç´¢é…ç½®
            google_api_key: Optional[str] = Field(default=None, alias="GOOGLE_API_KEY")
            google_search_engine_id: Optional[str] = Field(default=None, alias="GOOGLE_SEARCH_ENGINE_ID")

            # Bingæœç´¢é…ç½®
            bing_api_key: Optional[str] = Field(default=None, alias="BING_API_KEY")
            bing_endpoint: str = Field(default="https://api.bing.microsoft.com", alias="BING_ENDPOINT")

            # Serperæœç´¢é…ç½®
            serper_api_key: Optional[str] = Field(default=None, alias="SERPER_API_KEY")
        

ğŸ”„ ä¼ ç»Ÿæ–¹æ³• vs æœç´¢å¼•æ“é…ç½®
==================================================

âŒ ä¼ ç»Ÿrequestsæ–¹æ³•çš„é—®é¢˜:

# ä¼ ç»Ÿæ–¹æ³• - æ¯ä¸ªæœç´¢å¼•æ“éƒ½éœ€è¦å•ç‹¬å®ç°
def search_google(query):
    url = f"https://www.googleapis.com/customsearch/v1?key={api_key}&cx={cx}&q={query}"
    response = requests.get(url)
    # æ‰‹åŠ¨å¤„ç†é”™è¯¯
    if response.status_code != 200:
        raise Exception(f"æœç´¢å¤±è´¥: {response.status_code}")
    # æ‰‹åŠ¨è§£æç»“æœ
    data = response.json()
    results = []
    for item in data.get('items', []):
        results.append({
            'title': item['title'],
            'url': item['link'],
            'snippet': item['snippet']
        })
    return results

def search_bing(query):
    # å®Œå…¨ä¸åŒçš„å®ç°...
    pass

def search_duckduckgo(query):
    # åˆæ˜¯ä¸åŒçš„å®ç°...
    pass


âœ… æœç´¢å¼•æ“é…ç½®æ–¹æ³•çš„ä¼˜åŠ¿:

# ç°ä»£æ–¹æ³• - ç»Ÿä¸€æ¥å£
from core.search_tools import get_search_manager, SearchEngine

async def search_any_engine(query, engine=None):
    search_manager = get_search_manager()
    results = await search_manager.search(query, engine=engine)
    return results

# ä½¿ç”¨ç¤ºä¾‹
results = await search_any_engine("Pythonç¼–ç¨‹", SearchEngine.GOOGLE)
results = await search_any_engine("Pythonç¼–ç¨‹", SearchEngine.BING)
results = await search_any_engine("Pythonç¼–ç¨‹", SearchEngine.DUCKDUCKGO)

# å¤šå¼•æ“æœç´¢
multi_results = await search_manager.multi_engine_search("Pythonç¼–ç¨‹")

# èšåˆæœç´¢
aggregated = await search_manager.aggregate_search("Pythonç¼–ç¨‹")


ğŸ” çœŸå®æœç´¢æ¼”ç¤º
==============================
æœç´¢æŸ¥è¯¢: Python programming

ğŸ“¡ æ¨¡æ‹Ÿæœç´¢è¯·æ±‚...
âœ… æœç´¢å®Œæˆï¼Œè€—æ—¶: 0.00ç§’
ğŸ“Š æ‰¾åˆ° 3 ä¸ªç»“æœ:

1. æ ‡é¢˜: Pythonå®˜æ–¹æ–‡æ¡£
   é“¾æ¥: https://docs.python.org/
   æ‘˜è¦: Pythonæ˜¯ä¸€ç§è§£é‡Šå‹ã€é¢å‘å¯¹è±¡ã€åŠ¨æ€æ•°æ®ç±»å‹çš„é«˜çº§ç¨‹åºè®¾è®¡è¯­è¨€ã€‚
   æ¥æº: google
   è¯„åˆ†: 0.95

2. æ ‡é¢˜: Pythonæ•™ç¨‹ - èœé¸Ÿæ•™ç¨‹
   é“¾æ¥: https://www.runoob.com/python/python-tutorial.html
   æ‘˜è¦: Pythonæ˜¯ä¸€ä¸ªé«˜å±‚æ¬¡çš„ç»“åˆäº†è§£é‡Šæ€§ã€ç¼–è¯‘æ€§ã€äº’åŠ¨æ€§å’Œé¢å‘å¯¹è±¡çš„è„šæœ¬è¯­è¨€ã€‚
   æ¥æº: bing
   è¯„åˆ†: 0.88

3. æ ‡é¢˜: Learn Python Programming
   é“¾æ¥: https://www.programiz.com/python-programming
   æ‘˜è¦: Learn Python programming with our comprehensive tutorial. Start from basics and advance to complex topics.
   æ¥æº: duckduckgo
   è¯„åˆ†: 0.82


ğŸ“Š è¯¦ç»†å¯¹æ¯”åˆ†æ
==================================================

ğŸ”¸ ä»£ç ç»´æŠ¤:
   âŒ ä¼ ç»Ÿæ–¹æ³•: æ¯ä¸ªæœç´¢å¼•æ“éœ€è¦å•ç‹¬ç»´æŠ¤ï¼Œä»£ç é‡å¤åº¦é«˜
   âœ… é…ç½®æ–¹æ³•: ç»Ÿä¸€æ¥å£ï¼Œä¸€æ¬¡ç¼–å†™ï¼Œå¤šå¤„ä½¿ç”¨
   ğŸ’¡ ä¼˜åŠ¿: å‡å°‘90%çš„é‡å¤ä»£ç 

ğŸ”¸ é”™è¯¯å¤„ç†:
   âŒ ä¼ ç»Ÿæ–¹æ³•: æ¯ä¸ªå®ç°éƒ½éœ€è¦å•ç‹¬å¤„ç†HTTPé”™è¯¯ã€è¶…æ—¶ç­‰
   âœ… é…ç½®æ–¹æ³•: ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œè‡ªåŠ¨é‡è¯•
   ğŸ’¡ ä¼˜åŠ¿: æ›´å¯é çš„é”™è¯¯æ¢å¤

ğŸ”¸ æ€§èƒ½ä¼˜åŒ–:
   âŒ ä¼ ç»Ÿæ–¹æ³•: åŒæ­¥è¯·æ±‚ï¼Œé˜»å¡å¼æ“ä½œ
   âœ… é…ç½®æ–¹æ³•: å¼‚æ­¥æ“ä½œï¼Œæ”¯æŒå¹¶å‘æœç´¢
   ğŸ’¡ ä¼˜åŠ¿: æ€§èƒ½æå‡3-5å€

ğŸ”¸ åŠŸèƒ½æ‰©å±•:
   âŒ ä¼ ç»Ÿæ–¹æ³•: æ·»åŠ æ–°åŠŸèƒ½éœ€è¦ä¿®æ”¹æ‰€æœ‰å®ç°
   âœ… é…ç½®æ–¹æ³•: æ”¯æŒå¤šå¼•æ“æœç´¢ã€ç»“æœèšåˆã€æ™ºèƒ½æ’åº
   ğŸ’¡ ä¼˜åŠ¿: ä¸°å¯Œçš„é«˜çº§åŠŸèƒ½

ğŸ”¸ é…ç½®ç®¡ç†:
   âŒ ä¼ ç»Ÿæ–¹æ³•: APIå¯†é’¥ç¡¬ç¼–ç æˆ–åˆ†æ•£ç®¡ç†
   âœ… é…ç½®æ–¹æ³•: ç¯å¢ƒå˜é‡ç»Ÿä¸€ç®¡ç†ï¼Œæ”¯æŒå¤šç¯å¢ƒ
   ğŸ’¡ ä¼˜åŠ¿: æ›´å®‰å…¨çš„å¯†é’¥ç®¡ç†

ğŸ¯ å®é™…åº”ç”¨åœºæ™¯
==============================

ğŸ“Œ RAGç³»ç»Ÿ:
   æè¿°: æ£€ç´¢å¢å¼ºç”Ÿæˆç³»ç»Ÿéœ€è¦ä»å¤šä¸ªæœç´¢æºè·å–ä¿¡æ¯
   ä¼˜åŠ¿: å¤šå¼•æ“èšåˆæœç´¢ï¼Œæé«˜ä¿¡æ¯è¦†ç›–ç‡

ğŸ“Œ çŸ¥è¯†é—®ç­”:
   æè¿°: æ™ºèƒ½é—®ç­”ç³»ç»Ÿéœ€è¦å®æ—¶æœç´¢æœ€æ–°ä¿¡æ¯
   ä¼˜åŠ¿: å¼‚æ­¥æœç´¢ï¼Œå¿«é€Ÿå“åº”ç”¨æˆ·æŸ¥è¯¢

ğŸ“Œ å†…å®¹æ¨è:
   æè¿°: æ ¹æ®ç”¨æˆ·å…´è¶£æ¨èç›¸å…³å†…å®¹
   ä¼˜åŠ¿: æ™ºèƒ½è¯„åˆ†å’Œæ’åºï¼Œæé«˜æ¨èè´¨é‡

ğŸ“Œ å¸‚åœºè°ƒç ”:
   æè¿°: æ”¶é›†å’Œåˆ†æå¸‚åœºä¿¡æ¯
   ä¼˜åŠ¿: å¤šæºæ•°æ®èšåˆï¼Œå…¨é¢çš„å¸‚åœºæ´å¯Ÿ

ğŸ”§ é…ç½®æ–‡ä»¶ç»“æ„ (config.py)
========================================

        class SearchConfig(BaseModel):
            """æœç´¢é…ç½®"""
            default_engine: str = Field(default="duckduckgo", description="é»˜è®¤æœç´¢å¼•æ“")

            # Googleæœç´¢é…ç½®
            google_api_key: Optional[str] = Field(default=None, alias="GOOGLE_API_KEY")
            google_search_engine_id: Optional[str] = Field(default=None, alias="GOOGLE_SEARCH_ENGINE_ID")

            # Bingæœç´¢é…ç½®
            bing_api_key: Optional[str] = Field(default=None, alias="BING_API_KEY")
            bing_endpoint: str = Field(default="https://api.bing.microsoft.com", alias="BING_ENDPOINT")

            # Serperæœç´¢é…ç½®
            serper_api_key: Optional[str] = Field(default=None, alias="SERPER_API_KEY")
        

============================================================
ğŸ‰ æ¼”ç¤ºå®Œæˆ

ğŸ’¡ æ€»ç»“:
æœç´¢å¼•æ“é…ç½®æä¾›äº†ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„æœç´¢æ¡†æ¶ï¼Œ
ä½¿å¾—åº”ç”¨ç¨‹åºèƒ½å¤Ÿè½»æ¾é›†æˆå¤šç§æœç´¢æºï¼Œ
æé«˜æœç´¢è´¨é‡å’Œç”¨æˆ·ä½“éªŒã€‚

è¿™å¯¹äºæ„å»ºç°ä»£AIåº”ç”¨ï¼ˆå¦‚RAGç³»ç»Ÿã€æ™ºèƒ½é—®ç­”ç­‰ï¼‰
å…·æœ‰é‡è¦ä»·å€¼ã€‚

è¿›ç¨‹å·²ç»“æŸ,é€€å‡ºä»£ç 0

```

## é—®é¢˜ä¸‰ï¼š@dataclass æœ‰ä»€ä¹ˆç”¨ï¼Ÿå¦‚ä½•ç®€åŒ–å®ç°çš„ç»“æœç±»ï¼Ÿ
é—®é¢˜çš„åŸå› æ˜¯æˆ‘çœ‹åˆ°search_toolsä»£ç ä¸­æœ‰ä¸€ä¸ªç‰‡æ®µï¼š
```python
from dataclasses import dataclass
from typing import List, Dict, Any, Optional, AsyncGenerator
from datetime import datetime

@dataclass
class SearchResult:
    """æœç´¢ç»“æœæ•°æ®ç±»"""
    title: str
    url: str
    snippet: str
    source: str = ""
    timestamp: Optional[datetime] = None
    score: float = 0.0
    
    def to_dict(self) -> Dict[str, Any]:
        """è½¬æ¢ä¸ºå­—å…¸"""
        return {
            "title": self.title,
            "url": self.url,
            "snippet": self.snippet,
            "source": self.source,
            "timestamp": self.timestamp.isoformat() if self.timestamp else None,
            "score": self.score
        }
```
æˆ‘ä¸çŸ¥é“è¿™æ®µä»£ç æœ‰ä»€ä¹ˆç”¨ï¼Œè€Œä¸”ä¹‹å‰ä¹Ÿæ²¡ç”¨è¿‡@dataclassè¿™ä¸ªè£…é¥°å™¨ã€‚
æ€»ç»“çš„æ¥è¯´ï¼Œè¿™ä¸ªè£…é¥°å™¨çš„ä½œç”¨å°±æ˜¯ç›¸å½“äºinitæ–¹æ³•çš„ä½œç”¨ã€‚
##### **1. `SearchResult` ç±»çš„ä½œç”¨**
è¿™ä¸ªç±»æ˜¯ä¸€ä¸ª**æœç´¢ç»“æœçš„æ•°æ®å®¹å™¨**ï¼Œç”¨æ¥è§„èŒƒæœç´¢å¼•æ“è¿”å›çš„ç»“æœæ ¼å¼ã€‚åŒ…å«ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `title` | `str` | æœç´¢ç»“æœçš„æ ‡é¢˜ï¼ˆå¦‚ç½‘é¡µæ ‡é¢˜ï¼‰ |
| `url` | `str` | ç»“æœçš„é“¾æ¥åœ°å€ |
| `snippet` | `str` | æ‘˜è¦/ç‰‡æ®µï¼ˆæœç´¢å¼•æ“è¿”å›çš„ç®€çŸ­æè¿°ï¼‰ |
| `source` | `str` | å¯é€‰ï¼Œæ ‡è¯†æ¥æºï¼ˆå¦‚ "google"ã€"bing"ï¼‰ |
| `timestamp` | `Optional[datetime]` | å¯é€‰ï¼Œç»“æœçš„å‘å¸ƒæ—¶é—´ |
| `score` | `float` | å¯é€‰ï¼Œç›¸å…³æ€§è¯„åˆ†ï¼ˆ0.0~1.0ï¼‰ |
| `to_dict()` | æ–¹æ³• | å°†å¯¹è±¡è½¬ä¸ºå­—å…¸ï¼ˆé€‚åˆJSONåºåˆ—åŒ–ï¼‰ |

**å…¸å‹ä½¿ç”¨åœºæ™¯**ï¼š
```python
# æ¨¡æ‹Ÿæœç´¢å¼•æ“è¿”å›ç»“æœ
result = SearchResult(
    title="Pythonå®˜ç½‘", 
    url="https://python.org",
    snippet="Pythonç¼–ç¨‹è¯­è¨€å®˜æ–¹ç½‘ç«™",
    source="google"
)

# è½¬æ¢ä¸ºAPIå“åº”æ ¼å¼
print(result.to_dict())
# è¾“å‡º:
# {
#   'title': 'Pythonå®˜ç½‘',
#   'url': 'https://python.org',
#   'snippet': 'Pythonç¼–ç¨‹è¯­è¨€å®˜æ–¹ç½‘ç«™',
#   'source': 'google',
#   'timestamp': None,
#   'score': 0.0
# }
```

---

##### **2. `@dataclass` è£…é¥°å™¨çš„ä½œç”¨**
è¿™ä¸ªè£…é¥°å™¨æ¥è‡ªPythonæ ‡å‡†åº“`dataclasses`ï¼Œå®ƒèƒ½**è‡ªåŠ¨ç”Ÿæˆæ ·æ¿ä»£ç **ã€‚å…·ä½“æ¥è¯´ï¼š

##### **è§£å†³çš„é—®é¢˜**ï¼š
æ²¡æœ‰`@dataclass`æ—¶ï¼Œä½ éœ€æ‰‹åŠ¨å†™`__init__`ï¼š
```python
class SearchResult:
    def __init__(self, title: str, url: str, snippet: str, source: str = "", ...):
        self.title = title
        self.url = url
        # é‡å¤ä¸ºæ¯ä¸ªå­—æ®µå†™èµ‹å€¼... ğŸ˜«
```

##### **`@dataclass` å¸¦æ¥çš„è‡ªåŠ¨åŒ–**ï¼š
1. **è‡ªåŠ¨ç”Ÿæˆ`__init__`**
   æ ¹æ®ç±»å±æ€§å£°æ˜ç”Ÿæˆæ„é€ å‡½æ•°ï¼Œå¯ç›´æ¥ç”¨`SearchResult(title="...", url="...")`
 
2. **å…¶ä»–è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•**
   ```python
   __repr__()  # å‹å¥½æ‰“å°ï¼šSearchResult(title='...', url='...')
   __eq__()    # æ”¯æŒå¯¹è±¡æ¯”è¾ƒï¼ˆæŒ‰å­—æ®µå€¼å¯¹æ¯”ï¼‰
   ```

3. **é»˜è®¤å€¼æ”¯æŒ**
   å¦‚`source: str = ""`ä¼šæˆä¸ºæ„é€ å‡½æ•°çš„é»˜è®¤å‚æ•°

---

##### **3. å…³é”®è®¾è®¡é€‰æ‹©è§£æ**
| è®¾è®¡é€‰æ‹© | ä¼˜ç‚¹ | æ³¨æ„äº‹é¡¹ |
|---------|------|---------|
| **ä½¿ç”¨`@dataclass`** | ä»£ç ç®€æ´ï¼Œé¿å…é‡å¤ | éœ€è¦Python 3.7+ |
| **`Optional[datetime]`** | æ˜ç¡®æ—¶é—´å­—æ®µå¯é€‰ | ä½¿ç”¨æ—¶éœ€åˆ¤ç©º |
| **`to_dict()`æ–¹æ³•** | éšè—åºåˆ—åŒ–ç»†èŠ‚ | å¯æ‰©å±•ä¸ºæ›´å¤æ‚çš„è½¬æ¢é€»è¾‘ |

---

##### **å®Œæ•´æ”¹è¿›å»ºè®®**
å¦‚æœé¡¹ç›®å…è®¸ï¼Œå¯ä»¥ï¼š
1. **æ·»åŠ å­—æ®µéªŒè¯**ï¼ˆç”¨`pydantic`æ›¿ä»£`dataclass`ï¼‰ï¼š
   ```python
   from pydantic import BaseModel
   class SearchResult(BaseModel):  # è‡ªåŠ¨è·å¾—æ•°æ®éªŒè¯+åºåˆ—åŒ–èƒ½åŠ›
       title: str
       url: HttpUrl  # Pydanticçš„ç‰¹æ®ŠURLç±»å‹
   ```

2. **æ€§èƒ½ä¼˜åŒ–**ï¼ˆå†»ç»“å®ä¾‹ï¼‰ï¼š
   ```python
   @dataclass(frozen=True)  # é˜²æ­¢ç»“æœè¢«æ„å¤–ä¿®æ”¹
   class SearchResult: ...
   ```
   

## é—®é¢˜ä¸‰ã€æŠ½è±¡LLMæ¥å£è°ƒç”¨ï¼Œå®ç°é«˜æ€§èƒ½è°ƒç”¨çš„éœ€æ±‚
```python
class LLMProvider(Enum):
    """LLM æä¾›å•†æšä¸¾"""
    OPENAI = "openai"
    ANTHROPIC = "anthropic"
    SILICONFLOW = "siliconflow"
    LOCAL = "local"

class BaseLLMWrapper(ABC):
    """LLMåŒ…è£…å™¨åŸºç±»"""

    def __init__(self, provider: LLMProvider, **kwargs):
        self.provider = provider
        self.config = kwargs
        self._llm = None
        self._initialize()

    @abstractmethod
    def _initialize(self):
        """åˆå§‹åŒ–LLMå®ä¾‹"""
        pass

    @abstractmethod
    async def agenerate(self, messages: List[BaseMessage], **kwargs) -> str:
        """å¼‚æ­¥ç”Ÿæˆå“åº”"""
        pass

    @abstractmethod
    async def astream(self, messages: List[BaseMessage], **kwargs) -> AsyncGenerator[str, None]:
        """å¼‚æ­¥æµå¼ç”Ÿæˆå“åº”"""
        pass

    def generate(self, messages: List[BaseMessage], **kwargs) -> str:
        """åŒæ­¥ç”Ÿæˆå“åº”"""
        return asyncio.run(self.agenerate(messages, **kwargs))
```

ä»¥ä¸‹æ˜¯ `BaseLLMWrapper` ç±»çš„é€è¡Œè¯¦è§£ï¼Œé‡ç‚¹è¯´æ˜è®¾è®¡æ„å›¾ã€æŠ½è±¡æ–¹æ³•å’Œå¼‚æ­¥æœºåˆ¶çš„ä½œç”¨ï¼š

---

##### **ç±»å®šä¹‰ä¸åˆå§‹åŒ–**
```python
class BaseLLMWrapper(ABC):
    """LLMåŒ…è£…å™¨åŸºç±»ï¼ˆæŠ½è±¡ç±»ï¼Œéœ€å­ç±»å®ç°å…·ä½“é€»è¾‘ï¼‰"""
```
- **`ABC`**ï¼šç»§æ‰¿è‡ª `abc.ABC`ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª**æŠ½è±¡åŸºç±»**ï¼Œä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–ï¼Œå¿…é¡»é€šè¿‡å­ç±»å®ç°æŠ½è±¡æ–¹æ³•ã€‚

---

##### **`__init__` æ–¹æ³•**
```python
def __init__(self, provider: LLMProvider, **kwargs):
    self.provider = provider      # LLMæœåŠ¡æä¾›å•†ï¼ˆå¦‚OpenAIã€Geminiç­‰ï¼‰
    self.config = kwargs          # å…¶ä»–é…ç½®å‚æ•°ï¼ˆå¦‚APIå¯†é’¥ã€æ¨¡å‹åç§°ç­‰ï¼‰
    self._llm = None              # åˆå§‹åŒ–ä¸ºNoneï¼Œå­ç±»éœ€åœ¨_initialize()ä¸­èµ‹å€¼
    self._initialize()            # å¼ºåˆ¶å­ç±»å®Œæˆåˆå§‹åŒ–é€»è¾‘
```
- **å…³é”®ç‚¹**ï¼š
  - æ„é€ å‡½æ•°æ¥å— `provider` å’Œå¯å˜å‚æ•° `**kwargs`ï¼Œé€‚é…ä¸åŒLLMçš„é…ç½®éœ€æ±‚ã€‚
  - `_initialize()` æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œè¦æ±‚å­ç±»å¿…é¡»å®ç°å…·ä½“çš„LLMå®ä¾‹åŒ–é€»è¾‘ï¼ˆå¦‚åˆ›å»ºOpenAIå®¢æˆ·ç«¯ï¼‰ã€‚

---

### **æŠ½è±¡æ–¹æ³•ï¼ˆå­ç±»å¿…é¡»å®ç°ï¼‰**

#### 1. **`_initialize`**
```python
@abstractmethod
def _initialize(self):
    """åˆå§‹åŒ–LLMå®ä¾‹ï¼ˆå¦‚åˆ›å»ºAPIå®¢æˆ·ç«¯ï¼‰"""
```
- **ä½œç”¨**ï¼šå­ç±»éœ€åœ¨æ­¤æ–¹æ³•ä¸­å®ŒæˆLLMå®ä¾‹çš„åˆ›å»ºï¼ˆå¦‚ `self._llm = OpenAI(**self.config)`ï¼‰ã€‚
- **`@abstractmethod`**ï¼šæ ‡è®°è¯¥æ–¹æ³•ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°ï¼Œå¦åˆ™æŠ› `TypeError`ã€‚

#### 2. **å¼‚æ­¥ç”Ÿæˆå“åº” `agenerate`**
```python
@abstractmethod
async def agenerate(self, messages: List[BaseMessage], **kwargs) -> str:
    """å¼‚æ­¥ç”Ÿæˆå®Œæ•´å“åº”æ–‡æœ¬ï¼ˆéæµå¼ï¼‰"""
```
- **å‚æ•°**ï¼š
  - `messages`: æ¶ˆæ¯åˆ—è¡¨ï¼ˆé€šå¸¸ç¬¦åˆ `BaseMessage` åè®®ï¼Œå¦‚ `role/content` ç»“æ„ï¼‰ã€‚
  - `**kwargs`: æ‰©å±•å‚æ•°ï¼ˆå¦‚æ¸©åº¦ `temperature`ã€æœ€å¤§é•¿åº¦ `max_tokens`ï¼‰ã€‚
- **è¿”å›å€¼**ï¼šå®Œæ•´çš„å“åº”å­—ç¬¦ä¸²ã€‚
- **å¼‚æ­¥è®¾è®¡**ï¼šä½¿ç”¨ `async/await` æ”¯æŒé«˜å¹¶å‘ï¼Œé€‚åˆåœ¨å¼‚æ­¥æ¡†æ¶ï¼ˆå¦‚FastAPIï¼‰ä¸­è°ƒç”¨ã€‚

#### 3. **å¼‚æ­¥æµå¼å“åº” `astream`**
```python
@abstractmethod
async def astream(self, messages: List[BaseMessage], **kwargs) -> AsyncGenerator[str, None]:
    """å¼‚æ­¥æµå¼ç”Ÿæˆå“åº”ï¼ˆé€è¯æˆ–åˆ†å—è¿”å›ï¼‰"""
```
- **è¿”å›å€¼**ï¼šè¿”å›ä¸€ä¸ªå¼‚æ­¥ç”Ÿæˆå™¨ï¼ˆ`AsyncGenerator`ï¼‰ï¼Œé€æ­¥ç”Ÿæˆå“åº”ï¼ˆå¦‚ChatGPTçš„é€å­—è¾“å‡ºæ•ˆæœï¼‰ã€‚
- **é€‚ç”¨åœºæ™¯**ï¼šå®æ—¶äº¤äº’ã€å‡å°‘ç­‰å¾…å»¶è¿Ÿã€‚

---

### **åŒæ­¥å…¼å®¹æ–¹æ³• `generate`**
```python
def generate(self, messages: List[BaseMessage], **kwargs) -> str:
    """åŒæ­¥ç”Ÿæˆå“åº”ï¼ˆé€šè¿‡å°è£…å¼‚æ­¥æ–¹æ³•å®ç°ï¼‰"""
    return asyncio.run(self.agenerate(messages, **kwargs))
```
- **ä½œç”¨**ï¼šä¸ºä¸ç†Ÿæ‚‰å¼‚æ­¥ç¼–ç¨‹çš„åœºæ™¯æä¾›åŒæ­¥è°ƒç”¨æ¥å£ã€‚
- **å®ç°åŸç†**ï¼šé€šè¿‡ `asyncio.run` è°ƒç”¨å¼‚æ­¥æ–¹æ³• `agenerate`ï¼ˆæ³¨æ„ï¼šæ­¤æ–¹æ³•ä¼š**é˜»å¡å½“å‰çº¿ç¨‹**ï¼Œä¸é€‚åˆé«˜é¢‘è°ƒç”¨ï¼‰ã€‚

---

### **è®¾è®¡äº®ç‚¹ä¸æ³¨æ„äº‹é¡¹**
1. **æŠ½è±¡åŸºç±»è®¾è®¡**ï¼š
   - å¼ºåˆ¶å­ç±»å®ç°å…³é”®æ–¹æ³•ï¼Œç¡®ä¿ä¸åŒLLMæä¾›å•†çš„ä¸€è‡´æ€§æ¥å£ã€‚
   - ä¾‹å¦‚ï¼šæ— è®ºOpenAIè¿˜æ˜¯Geminiçš„å­ç±»ï¼Œéƒ½éœ€å®ç° `agenerate` å’Œ `astream`ã€‚

2. **å¼‚æ­¥ä¼˜å…ˆ**ï¼š
   - åŸç”Ÿæ”¯æŒå¼‚æ­¥ï¼ˆ`async/await`ï¼‰ï¼Œé€‚åˆç°ä»£Pythonå¼‚æ­¥ç”Ÿæ€ï¼ˆå¦‚FastAPIã€WebSocketsï¼‰ã€‚
   - åŒæ­¥æ–¹æ³• `generate` ä»…ä½œä¸ºå…¼å®¹å±‚ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ç›´æ¥ç”¨å¼‚æ­¥ã€‚

3. **æ‰©å±•æ€§**ï¼š
   - `**kwargs` å…è®¸çµæ´»ä¼ é€’LLMç‰¹æœ‰å‚æ•°ï¼ˆå¦‚OpenAIçš„ `temperature` æˆ–Geminiçš„ `safety_settings`ï¼‰ã€‚

4. **æ½œåœ¨é—®é¢˜**ï¼š
   - **`asyncio.run` é™åˆ¶**ï¼šåœ¨å·²æœ‰äº‹ä»¶å¾ªç¯ä¸­ï¼ˆå¦‚Jupyter Notebookï¼‰è°ƒç”¨ `generate` ä¼šæŠ¥é”™ï¼Œéœ€æ”¹ç”¨ `await agenerate()`ã€‚

---

### **å­ç±»å®ç°ç¤ºä¾‹ï¼ˆOpenAIåŒ…è£…ï¼‰**
```python
class OpenAIWrapper(BaseLLMWrapper):
    def _initialize(self):
        from openai import AsyncOpenAI
        self._llm = AsyncOpenAI(**self.config)  # å®ä¾‹åŒ–å¼‚æ­¥å®¢æˆ·ç«¯

    async def agenerate(self, messages, **kwargs):
        response = await self._llm.chat.completions.create(
            messages=[m.to_dict() for m in messages],
            **kwargs
        )
        return response.choices[0].message.content

    async def astream(self, messages, **kwargs):
        stream = await self._llm.chat.completions.create(
            messages=[m.to_dict() for m in messages],
            stream=True,
            **kwargs
        )
        async for chunk in stream:
            yield chunk.choices[0].delta.content
```

--- 

### **æ€»ç»“**
- **æ ¸å¿ƒç›®çš„**ï¼šç»Ÿä¸€ä¸åŒLLMçš„è°ƒç”¨æ¥å£ï¼Œéšè—å®ç°ç»†èŠ‚ã€‚
- **å¼‚æ­¥ä¼˜å…ˆ**ï¼šåŸç”Ÿæ”¯æŒåç¨‹ï¼Œé€‚é…é«˜æ€§èƒ½åœºæ™¯ã€‚
- **çµæ´»æ‰©å±•**ï¼šé€šè¿‡æŠ½è±¡æ–¹æ³•å’Œ `**kwargs` å…¼å®¹å¤šæ ·åŒ–éœ€æ±‚ã€‚


## æµå¼å“åº”å›è°ƒå¤„ç†å™¨
Builder

å‚è€ƒäº† 2 ä¸ªä¸Šä¸‹æ–‡

æˆ‘éœ€è¦è¯¦ç»†åˆ†æåŸç‰ˆ MindSearch ä¸­çš„æµå¼å¤„ç†æœºåˆ¶å’Œç»§æ‰¿ç»“æ„ï¼Œå¯¹æ¯”å½“å‰å®ç°çš„å·®å¼‚ï¼Œå¹¶è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·çš„è®¾è®¡ã€‚

langchain_rebuild/agents/mindsearch_agent.py 1 - 50

ç»§ç»­æŸ¥çœ‹å½“å‰å®ç°çš„ MindSearch æ™ºèƒ½ä½“ç±»å®šä¹‰ï¼Œäº†è§£å…¶ç»“æ„å’Œæ–¹æ³•ã€‚

langchain_rebuild/agents/mindsearch_agent.py 51 - 150

ç»§ç»­æŸ¥çœ‹ MindSearch æ™ºèƒ½ä½“çš„æ ¸å¿ƒæ–¹æ³•å®ç°ï¼Œç‰¹åˆ«æ˜¯æœç´¢å’Œæµå¼å¤„ç†ç›¸å…³çš„æ–¹æ³•ã€‚

langchain_rebuild/agents/mindsearch_agent.py 151 - 250

ç»§ç»­æŸ¥çœ‹å¼‚æ­¥æ–¹æ³•çš„å®ç°ï¼Œäº†è§£å®Œæ•´çš„æœç´¢æµç¨‹ã€‚

langchain_rebuild/agents/mindsearch_agent.py 251 - 350

æŸ¥çœ‹æœ€åéƒ¨åˆ†çš„ä»£ç ï¼Œäº†è§£å®Œæ•´çš„å®ç°å’Œå¼‚æ­¥æ™ºèƒ½ä½“ç±»ã€‚

langchain_rebuild/agents/mindsearch_agent.py 351 - 447

## åŸç‰ˆ MindSearch vs å½“å‰å®ç°çš„å…³é”®å·®å¼‚åˆ†æ
### 1. ç»§æ‰¿ç»“æ„çš„å·®å¼‚
åŸç‰ˆ MindSearch:

- MindSearchAgent ç»§æ‰¿è‡ª StreamingAgentForInternLM
- AsyncMindSearchAgent ç»§æ‰¿è‡ª AsyncStreamingAgentForInternLM
- è¿™äº›åŸºç±»æ¥è‡ª `streaming.py`
å½“å‰å®ç°:

- `mindsearch_agent.py` ä¸­çš„ MindSearchAgent æ˜¯æ™®é€šç±»ï¼Œæ²¡æœ‰ç»§æ‰¿ç‰¹æ®Šçš„æµå¼åŸºç±»
- AsyncMindSearchAgent åªæ˜¯ç®€å•ç»§æ‰¿è‡ª MindSearchAgent
### 2. æµå¼å¤„ç†æœºåˆ¶çš„ä½œç”¨
åŸç‰ˆçš„ Streaming æœºåˆ¶:

1. 1.
   å®æ—¶å“åº” : StreamingAgentMixin è®©æ™ºèƒ½ä½“èƒ½å¤Ÿå®æ—¶è¾“å‡ºä¸­é—´ç»“æœï¼Œè€Œä¸æ˜¯ç­‰å¾…å…¨éƒ¨å®Œæˆ
2. 2.
   çŠ¶æ€ç®¡ç† : é€šè¿‡ AgentStatusCode å’Œ ModelStatusCode ç²¾ç¡®æ§åˆ¶æ‰§è¡ŒçŠ¶æ€
3. 3.
   å·¥å…·æ‰§è¡Œæµ : æ”¯æŒ PLUGIN_START ã€ CODING ã€ STREAM_ING ç­‰çŠ¶æ€ï¼Œè®©ç”¨æˆ·äº†è§£å½“å‰æ‰§è¡Œé˜¶æ®µ
4. 4.
   å†…å­˜ç®¡ç† : è‡ªåŠ¨å¤„ç†æ¶ˆæ¯å†å²å’Œä¼šè¯çŠ¶æ€
5. 5.
   å¼‚æ­¥æ”¯æŒ : AsyncStreamingAgentMixin æä¾›å®Œæ•´çš„å¼‚æ­¥æµå¼å¤„ç†
å…³é”®ä»£ç è§£æ:

```
#Â åŸç‰ˆæµå¼å¤„ç†çš„æ ¸å¿ƒ
forÂ messageÂ inÂ self.agent(message,Â 
session_id=session_id,Â **kwargs):
Â Â Â Â ifÂ isinstance(message.formatted,Â 
Â Â Â Â dict)Â andÂ message.formatted.get
Â Â Â Â ("tool_type"):
Â Â Â Â Â Â Â Â #Â å·¥å…·æ‰§è¡ŒçŠ¶æ€ç®¡ç†
Â Â Â Â Â Â Â Â message.stream_stateÂ =Â 
Â Â Â Â Â Â Â Â AgentStatusCode.PLUGIN_START
Â Â Â Â else:
Â Â Â Â Â Â Â Â #Â æ™®é€šæµå¼è¾“å‡º
Â Â Â Â Â Â Â Â message.stream_stateÂ =Â 
Â Â Â Â Â Â Â Â AgentStatusCode.STREAM_ING
Â Â Â Â yieldÂ messageÂ Â #Â å®æ—¶è¾“å‡º
```
### 3. å½“å‰å®ç°çš„é—®é¢˜
ç¼ºå°‘çš„å…³é”®åŠŸèƒ½:

1. 1.
   æ ‡å‡†åŒ–çŠ¶æ€ç®¡ç† : æ²¡æœ‰ç»Ÿä¸€çš„çŠ¶æ€ç ç³»ç»Ÿ
2. 2.
   å·¥å…·æ‰§è¡Œå¯è§†åŒ– : ç”¨æˆ·æ— æ³•å®æ—¶çœ‹åˆ°æœç´¢ã€åˆ†æç­‰æ­¥éª¤çš„è¿›åº¦
3. 3.
   å†…å­˜å’Œä¼šè¯ç®¡ç† : ç¼ºå°‘ lagent æ¡†æ¶çš„å†…å­˜ç®¡ç†æœºåˆ¶
4. 4.
   é”™è¯¯å¤„ç† : æ²¡æœ‰æ ‡å‡†åŒ–çš„é”™è¯¯çŠ¶æ€ä¼ æ’­
5. 5.
   å…¼å®¹æ€§ : ä¸ lagent ç”Ÿæ€ç³»ç»Ÿä¸å…¼å®¹
### 4. å»ºè®®çš„æ”¹è¿›æ–¹æ¡ˆ
æ–¹æ¡ˆä¸€: å®ç°ç±»ä¼¼çš„æµå¼åŸºç±»

```
classÂ StreamingMindSearchAgent
(StreamingAgentMixin):
Â Â Â Â defÂ forward(self,Â message,Â 
Â Â Â Â session_id=0,Â **kwargs):
Â Â Â Â Â Â Â Â #Â å®ç°ç±»ä¼¼åŸç‰ˆçš„æµå¼å¤„ç†é€»è¾‘
Â Â Â Â Â Â Â Â forÂ stepÂ inÂ self.search_steps:
Â Â Â Â Â Â Â Â Â Â Â Â yieldÂ AgentMessage
Â Â Â Â Â Â Â Â Â Â Â Â (content=step,Â 
Â Â Â Â Â Â Â Â Â Â Â Â stream_state=AgentStatusCode.
Â Â Â Â Â Â Â Â Â Â Â Â PLUGIN_START)
```
æ–¹æ¡ˆäºŒ: å¢å¼ºç°æœ‰å›è°ƒæœºåˆ¶

- å°† StreamingCallbackHandler å‡çº§ä¸ºæ›´å®Œæ•´çš„çŠ¶æ€ç®¡ç†ç³»ç»Ÿ
- æ·»åŠ æ ‡å‡†åŒ–çš„çŠ¶æ€ç å’Œæ¶ˆæ¯æ ¼å¼
### 5. æ˜¯å¦ä¼šæœ‰é—®é¢˜ï¼Ÿ
æ½œåœ¨é—®é¢˜:

1. 1.
   ç”¨æˆ·ä½“éªŒ : ç¼ºå°‘å®æ—¶åé¦ˆï¼Œç”¨æˆ·ä¸çŸ¥é“ç³»ç»Ÿåœ¨åšä»€ä¹ˆ
2. 2.
   è°ƒè¯•å›°éš¾ : æ— æ³•è¿½è¸ªä¸­é—´çŠ¶æ€ï¼Œéš¾ä»¥å®šä½é—®é¢˜
3. 3.
   æ‰©å±•æ€§ : éš¾ä»¥ä¸å…¶ä»– lagent ç»„ä»¶é›†æˆ
4. 4.
   æ€§èƒ½ç›‘æ§ : ç¼ºå°‘è¯¦ç»†çš„æ‰§è¡ŒçŠ¶æ€ä¿¡æ¯
å»ºè®®:

- å¦‚æœåªæ˜¯ç®€å•ä½¿ç”¨ï¼Œå½“å‰å®ç°åŸºæœ¬å¤Ÿç”¨
- å¦‚æœè¦æ„å»ºç”Ÿäº§çº§ç³»ç»Ÿï¼Œå»ºè®®å‚è€ƒåŸç‰ˆå®ç°æµå¼å¤„ç†æœºåˆ¶
- å¯ä»¥å…ˆä¿æŒå½“å‰æ¶æ„ï¼Œé€æ­¥æ·»åŠ æµå¼å¤„ç†åŠŸèƒ½
å½“å‰å®ç°æ›´åƒæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„æœç´¢å·¥å…·ï¼Œè€ŒåŸç‰ˆæ›´åƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„æ™ºèƒ½ä½“æ¡†æ¶ã€‚ä¸¤è€…å„æœ‰ä¼˜åŠ¿ï¼Œé€‰æ‹©å–å†³äºå…·ä½“éœ€æ±‚ã€‚

é­å¯Œå¼º

å¤åˆ¶

åˆ é™¤

mindsearch_agent.py 66-66 è¿™ä¸€å—æ˜¯å¹²ä»€ä¹ˆç”¨çš„

Builder

å‚è€ƒäº† 1 ä¸ªä¸Šä¸‹æ–‡

mindsearch_agent.py 66-67

æŸ¥çœ‹ç¬¬66è¡Œçš„StreamingCallbackHandlerç±»çš„å…·ä½“å®ç°å’Œä½œç”¨ã€‚

langchain_rebuild/agents/mindsearch_agent.py 66 - 110

## StreamingCallbackHandler ç±»çš„ä½œç”¨
`StreamingCallbackHandler` æ˜¯ä¸€ä¸ª æµå¼å“åº”å›è°ƒå¤„ç†å™¨ ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ï¼š

##### 1. å®æ—¶ç›‘æ§å’Œåé¦ˆ
è¿™ä¸ªç±»ç»§æ‰¿è‡ª LangChain çš„ BaseCallbackHandler ï¼Œç”¨äºç›‘æ§ LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰å’Œå·¥å…·çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå¹¶æä¾›å®æ—¶åé¦ˆã€‚

##### 2. æ ¸å¿ƒåŠŸèƒ½
LLM æ‰§è¡Œç›‘æ§ï¼š

- on_llm_start() : LLM å¼€å§‹æ‰§è¡Œæ—¶è§¦å‘ï¼Œè®°å½•è¾“å…¥çš„æç¤ºè¯
- on_llm_new_token() : æ¯å½“ LLM ç”Ÿæˆæ–°çš„ token æ—¶è§¦å‘ï¼Œå®ç°æµå¼è¾“å‡º
- on_llm_end() : LLM æ‰§è¡Œå®Œæˆæ—¶è§¦å‘ï¼Œè¾“å‡ºæœ€ç»ˆç»“æœ
å·¥å…·æ‰§è¡Œç›‘æ§ï¼š

- on_tool_start() : å·¥å…·å¼€å§‹æ‰§è¡Œæ—¶è§¦å‘ï¼ˆå¦‚æœç´¢å·¥å…·å¼€å§‹å·¥ä½œï¼‰
- on_tool_end() : å·¥å…·æ‰§è¡Œå®Œæˆæ—¶è§¦å‘

```python
# æ ¸å¿ƒå·¥ä½œæµç¨‹
def on_llm_new_token(self, token: str, **kwargs):
    self.current_content += token  # ç´¯ç§¯å†…å®¹
    if self.callback_func:
        self.callback_func({
            "type": "token",
            "data": {"token": token, "content": self.current_content}
        })  # å®æ—¶å›è°ƒ
```

##### 4. å®é™…åº”ç”¨åœºæ™¯
ç”¨æˆ·ä½“éªŒæå‡ï¼š

- è®©ç”¨æˆ·çœ‹åˆ° AI æ­£åœ¨"æ€è€ƒ"çš„è¿‡ç¨‹
- æ˜¾ç¤ºæœç´¢è¿›åº¦ï¼ˆ"æ­£åœ¨ä½¿ç”¨ Google æœç´¢å·¥å…·..."ï¼‰
- å®æ—¶æ˜¾ç¤ºç”Ÿæˆçš„ç­”æ¡ˆï¼Œè€Œä¸æ˜¯ç­‰å¾…å…¨éƒ¨å®Œæˆ
è°ƒè¯•å’Œç›‘æ§ï¼š

- è¿½è¸ªæ¯ä¸ªæ‰§è¡Œæ­¥éª¤
- ç›‘æ§ LLM çš„è¾“å‡ºè´¨é‡
- è®°å½•å·¥å…·è°ƒç”¨çš„è¯¦ç»†ä¿¡æ¯
##### 5. ä¸åŸç‰ˆ MindSearch çš„å¯¹æ¯”
è¿™ä¸ª StreamingCallbackHandler æ˜¯å½“å‰å®ç°ä¸­ç”¨æ¥ æ¨¡æ‹Ÿ åŸç‰ˆ MindSearch æµå¼å¤„ç†åŠŸèƒ½çš„ç»„ä»¶ã€‚è™½ç„¶ä¸å¦‚åŸç‰ˆçš„ StreamingAgentMixin å®Œæ•´ï¼Œä½†æä¾›äº†åŸºæœ¬çš„å®æ—¶åé¦ˆèƒ½åŠ›ã€‚

ä¼˜åŠ¿ï¼š ç®€å•æ˜“ç”¨ï¼ŒåŸºäº LangChain æ ‡å‡†æ¥å£ åŠ£åŠ¿ï¼š åŠŸèƒ½ç›¸å¯¹ç®€å•ï¼Œç¼ºå°‘å¤æ‚çš„çŠ¶æ€ç®¡ç†

è¿™ä¸ªç±»æ˜¯å½“å‰ MindSearch å®ç°ä¸­å®ç°"æµå¼ä½“éªŒ"çš„å…³é”®ç»„ä»¶ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿå®æ—¶çœ‹åˆ°æœç´¢å’Œæ€è€ƒçš„è¿‡ç¨‹ã€‚